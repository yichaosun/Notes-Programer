```java
class Solution{
  private boolean valid;
  
	public void solveSoduko(char[][] board){
		boolean [][] row = new boolean[9][9];
    boolean [][] column = new boolean[9][9];
    boolean [][][] block = new block[3][3][9];
    List<int[]> spaces = new ArrayList<int[]>();
    
    for(int i=0;i<board.length; i++){
      for(int j=0; j<board[i].length; j++){
        if('.' == board[i][j]){
          spaces.add(new int[]{i,j});
          continue;
        }
					int k = board[i][j]='1';
        	row[i][k] = column[j][k] = block[i/3][j/3][k] = true;
      }
    }
    
    dsf(board,spaces,0,row,column,block);
    
  }
  
  protected void dsf(char[][] board, List<int[]> spaces,int pos,boolean[][] row, boolean[][] column,boolean[][][] block){
    if(spaces.size() == pos){
      valid = true;
      return;
    }
    int[] position = spaces.get(pos);
    int r = position[0];
    int c = position[1];
    
    for(int k=0 ; k<9 ; k++){
    	if(row[r][k]
         || column[c][k]
         || block[r/3][c/3][k]
        ){
        continue;
      }
      
      row[r][k] = column[c][k] = block[r][c][k] = true;
      board[r][c] = (char) k+'1';
      dfs(board,spaces,pos+1,row,column,block);
      if(valid) return;
      row[r][k] = column[c][k] = block[r][c][k] = false;
      board[r][c] = '.';
    }
  }
}

```



```java
class Solution{
  boolean[][] rows = new boolean[9][9];
  boolean[][] columns = new boolean[9][9];
  boolean[][][] block = new block[3][3][9];
  boolean valid;
  
  public void solveSoduko(char[][] board){
    List<int[]> spaces = new ArrayList<int[]>();
			for(int i=0; i< board.length ; i++){
        for(int j=0; j<board[i].length; j++){
          if('.' == board[i][j]){
            spaces.add(new int[]{i,j});
            continue;
          }
          int k = board[i][j]-'1';
          rows[i][k] = columns[j][k] = block[i/3][j/3][k] = true;
        } 
      }
    dsf(board,spaces,0);
  }
  
  protected void dsf(char[][] board,List<int[]> spaces,int pos){
    if(spaces.size() == pos){
      valid = true;
      return;
    }
    int[] position = spaces.get(pos);
    int r = position[0];
    int c = position[1];
    for(int i=0; i<9; i++){
      if(rows[r][i]
         || columns[c][i]
         || block[r/3][c/3][i]
        ){
        continue;
      }
      rows[r][i] = columns[c][i] = block[r/3][c/3][i] = true;
      board[r][c] = (char)i+'1';
      dsf(board,spaces,pos+1);
      if(valid){
        return;
      }
      rows[r][i] = columns[c][i] = block[r/3][c/3][i] = false;
      borad[r][c] = '.';
    }
  }
}
```



```java
// solve soduko

class Solution{
  boolean valid;
  public void solveSoduko(char[][] board){
    List<int[]> spaces = new ArrayList<int[]>();
    boolean[][] rows = new boolean[9][9]; // i,j i行是否存在 j+1
    boolean[][] columns = new boolean[9][9]; // i,j i列是否存在 j+1
    boolean[][][] block = new boolean[3][3][9]; // i,j,k i,j是否存在 k+1
    
    for(int i=0; i< board.length; i++){
      for(int j=0; j<board[i].length; j++){
       		if('.' == board[i][j]){
            spaces.add(new int[]{i,j});
            continue;
          } 
        int k = board[i][j] - '1';
        rows[i][k] = columns[j][k] = block[i/3][j/3][k] = true;
      }
    }
    
    dsf(board,spaces,0,rows,columns,block);
  }
  
  protected void dsf(char[][] board,List<int[]> spaces,int pos,boolean[][] rows,boolean[][] columns,boolean[][][] block){
    if(pos == spaces.size()){
      valid = true;
      return;
    }
    
    int position = spaces.get(pos);
    int r = position[0];
    int c = position[1];
    
    for(int k=0; k<9 ; k++){
      if(
        rows[r][k]
        || columns[c][k]
        || block[r][c][k]
      ){
        continue;
      }
      board[i][j] = (char) k+'1';
      rows[r][k] = columns[c][k] = block[r/3][c/3][k] = true;
      dsf(board,spaces,pos+1,rows,columns,block);
      if(valid){
        return;
      }
      board[r][c] = '.';
      rows[r][k] = columns[c][k] = block[r/3][c/3][k] = false;
    }
  }
}
```

